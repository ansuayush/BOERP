
@{
	ViewBag.Title = "CustomerList";
	Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.16.9/xlsx.full.min.js"></script>
<script>
	var fileCount;
</script>
<ul class="tablink">
	<li><a href="/BusinessPartner/CustomerList?auth=@ViewBag.Auth" class="nav-link active">Customers </a></li>
	<li><a href="~/BusinessPartner/Vendor?auth=@ViewBag.Auth" class="nav-link">Vendor</a></li>

</ul>

<!-- page title -->
<div class="pagetitle gap-bottom d-flex justify-content-between">
	<h1 class="m-0 d-flex ">
		Customers
		<div class="ml-2">
			<svg data-toggle="tooltip" title="This page shows list of all the Customers" width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_423_173595)"><path d="M10.0001 18.3334C14.6025 18.3334 18.3334 14.6025 18.3334 10.0001C18.3334 5.39771 14.6025 1.66675 10.0001 1.66675C5.39771 1.66675 1.66675 5.39771 1.66675 10.0001C1.66675 14.6025 5.39771 18.3334 10.0001 18.3334Z" stroke="#25282B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M10 13.3333V10" stroke="#25282B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M10 6.66675H10.0083" stroke="#25282B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_423_173595"><rect width="20" height="20" fill="white"></rect></clipPath></defs></svg>
		</div>
	</h1>
	<div class="align-self-center d-flex gap-10">
		<a href="#" class="btn border-r-8" data-toggle="tooltip" id="exportExcel" title="Download"><img src="~/assets/images/icons/help/filter/download-icon.svg" class="btn-icon m-0"></a>
		<a href="#" class="btn border-r-8" data-toggle="modal">
			<img data-toggle="tooltip" onclick="VendorPopup();" title="Upload" src="~/assets/images/icons/help/filter/import-icon.svg" class="btn-icon m-0" data-original-title="Import">
		</a>
		@*<a href="#" data-toggle="tooltip" title="Share" class="btn border-r-8">
				<img src="~/assets/images/icons/help/filter/export-icon.svg" class="btn-icon m-0">
			</a>*@
		<div class=" dropdown">
			<button class="dropdown-toggle arrow-none btn mr-2 actionbtn border-r-8 " type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="false" aria-expanded="false">
				Bulk Assign <img src="../assets/images/icons/help/bottom-arrow-white.png" class="btn-icon btn-icon-right " />
			</button>
			<div class="dropdown-menu actiondropdown dropdown-menu-right  " aria-labelledby="dropdownMenuButton">
				<a class="dropdown-item d-flex gap-10" href="" data-toggle="modal" data-target="#nbd" onclick="ClearBulkFormNBDCRRUser()">
					Bulk Assign for NBD
				</a>

				<a class="dropdown-item d-flex gap-10" href="" data-toggle="modal" data-target="#crr" onclick="ClearBulkFormNBDCRRUser()">
					Bulk Assign for CRR
				</a>

			</div>
		</div>
		<a href="/BusinessPartner/AddCustomer?auth=@ViewBag.Auth&custid=0" class="btn mr-2 actionbtn border-r-8"><img src="~/assets/images/icons/help/add-white-icon.png" class="btn-icon">Add New Customer</a>
	</div>
</div>
<!--  -->

<div class="secondary-light-bg third-container">
	<div class="row table-filter">
		<div class="col-sm-2 form-group">
			<label for="role">Status </label>
			<select class="form-control applyselect" id="ddlStatus" onchange="bindCustomerGridFilter()">
			</select>
		</div>

		<div class="col-sm-2 form-group" style="display:none">
			<label for="role">CRR Project </label>
			<select class="form-control applyselect">

				<option>All</option>
				<option>Approved</option>
				<option>Pending</option>
				<option>Rejected</option>
			</select>
		</div>
		<div class="col-sm-2 form-group" style="display:none">
			<label for="role">NBD Project </label>
			<select class="form-control applyselect">

				<option>All</option>
				<option>Vikram Malhotra</option>
				<option>Avni Gupta</option>
				<option>Shreya Agarwal</option>
			</select>
		</div>
		<div class="col-sm-2 ml-auto form-group">
			<div class="searchbox">
				<label style="" for="role"></label>
				<div class="search w-300">
					<label class="icon" for="globalSearch"><img src="../../assets/images/icons/help/search-icon.png" class="icon-sm"></label>
					<input type="text" id="globalSearch" class="form-control d-inline-block" placeholder="Global Search...">
				</div>

			</div>
		</div>

		@*<div class="col-sm-2 form-group">
				 <label for="role">Unassigned Customers</label>
				 <select class="form-control applyselect">

					 <option>All</option>
					 <option>Unassigned Customers 1</option>
					 <option>Unassigned Customers 2</option>
					 <option>Unassigned Customers 3</option>
					 <option>Unassigned Customers 4</option>
				 </select>
			 </div>
			<div class="col-sm-2 form-group">
				 <label for="role">Show/Hide Columns</label>
				 <select class="form-control border-r-8 multiple-checkboxes" multiple="multiple">
					 <option value="CustomerId	">Customer Id	</option>
					 <option value="CompanyName	">Company Name		</option>
					 <option value="BrandName	">Brand Name		</option>
					 <option value="NumbersOfOrders	">Numbers Of Orders		</option>

				 </select>
			 </div>*@



	</div>
	<!--  -->
	@*<div class="table-responsive">
			<table id="tblCustomerList" class="display rstable dgntable dataTable no-footer">
				<thead>
					<tr>
						<th width="150">Customer Code</th>
						<th width="200">Company Name</th>
						<th width="150">Brand Name</th>
						<th width="100">Numbers <span class="d-block"> Of Orders</span></th>
						<th width="70">Lifetime <span class="d-block">Value</span></th>
						<th width="70">Active <span class="d-block"> Orders</span></th>
						<th width="100">Last Order  <span class="d-block">Date</span></th>
						<th width="100">Expected <span class="d-block">Reorder Date</span></th>
						<th width="90">Open NBD <span class="d-block">Projects</span></th>
						<th width="150">CRR</th>
						<th width="150">NBD</th>
						<th width="100">Status</th>
						<th width="80" class="text-center">Action</th>
					</tr>
					<tr class="searchfilter">
						<th>
							<div class="filterdgn">
								<input type="text" class="filter-input" placeholder="Search" id="txtCustCode"> <label for="search" class="m-0"><img src="~/assets/images/icons/help/search-icon.png" class="filtersearchincon" /></label>
							</div>
						</th>
						<th>
							<div class="filterdgn">
								<input type="text" class="filter-input" placeholder="Search" id="txtCompName"> <label for="search" class="m-0"><img src="~/assets/images/icons/help/search-icon.png" class="filtersearchincon" /></label>
							</div>
						</th>
						<th>
							<div class="filterdgn">
								<input type="text" class="filter-input" placeholder="Search" id="txtBrandName"> <label for="search" class="m-0"><img src="~/assets/images/icons/help/search-icon.png" class="filtersearchincon" /></label>
							</div>
						</th>

						<th></th>
						<th></th>
						<th></th>
						<th></th>

						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
					</tr>
				</thead>

			</table>
		</div>*@
	<!--  -->
	<!-- Grid with Scrollable Area -->
	<div class="grid-wrapper" style="padding-top: 40px">
		<div id="myGrid" class="ag-theme-alpine agrid-dgn" style="height: 600px"></div>
	</div>

</div>
<div class="overlay" id="overlay"></div>
<div class=" modal custom-alert" id="customAlert">
	<div class="custom-lg">
		<div class="modal-header">
			<h2 class="modal-title">Empty Columns</h2>
			<img src="~/assets/images/icons/help/close-icon.png" onclick="closeAlert()" class="closeicon" data-dismiss="modal" />
		</div>
		<div class="modal-body">
			<div id="alertContent"></div>
		</div>
		<div class="text-center modal-footer"> <button onclick="closeAlert()" class="btn btn-lg cancelbtn mt-2">Close</button></div>
	</div>
</div>
<!-- Create New Project  Modal popup -->
<div class="modal model-freeze uploaddgn" id="upload">
	<div class="modal-dialog modal-dialog-centered modal-lg">
		<div class="modal-content ">
			<!-- Modal Header -->
			<div class="modal-header">
				<h4 class="modal-title text-center w-100">Upload</h4>
				<button type="button" class="close" data-dismiss="modal"><img src="~/assets/images/icons/help/close-icon.png" class="closeicon"></button>
			</div>
			<!-- Modal body -->
			<div class="modal-body">
				<div class="section-container section-container-popup">
					<div class="fileuploadview drag-area1">
						<div class="uploadicon_text file-input-button" id="fileInputButton1">
							<div class="uploadicon">
								<img src="~/assets/images/icons/help/fileupload-icon.svg" alt="">
							</div>
							<div class="uploadtext drag-file" id="dragFile1">
								<h4>Drop files here or click to upload</h4>
								<h6>This is a dropzone, drop files or click to browse</h6>
								@*<span class="error">The file size should be upto 2MB,<br /> with a maximum of 10 attachments.</span>*@
							</div>
						</div>
						<input type="file" onchange="UploadVendorExcel();" id="fileUpload" class="file-input hidden" accept=".xls,.xlsx" />
						<div id="documentImages1" class="document-images"></div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-lg cancelbtn" data-dismiss="modal">Cancel</button>
				<button class="btn btn-lg actionbtn" style="display:none;" id="btnExcelUpload" onclick="SaveBulkUploadDocument();" data-dismiss="modal">Upload</button>
			</div>
		</div>
	</div>
</div>
<!-- Popup Modal for File Limit -->
<div id="fileLimitPopup" class="popup-modal">
	<div class="popup-content">
		<p id="popup-message"></p>
		<button id="close-popup"><img src="~/assets/images/icons/help/close.svg" alt=""></button>
	</div>
</div>

<!--  Bulk Assign for NBD -->
<div class="modal fade drawer right-align" id="nbd" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header side-header justify-content-between d-flex">
				<h2 class="modal-title"><img src="../assets/images/icons/help/svg/back-white-arrow.svg" data-dismiss="modal" alt="" class="cursor-pointer"> Bulk Assign for NBD</h2>
				<img src="../assets/images/icons/help/close-white-icon.png" class="cursor-pointer align-self-center close" data-dismiss="modal" onclick="ClearBulkFormNBDCRRUser()" />
			</div>
			<div class="modal-body mb-100">
				<!-- open -->
				<div class=" mb-10 form-group">
					<label>Current Assigned NBD</label>
					<select id="ddlNBDUser" class="form-control applyselect MandatoryNBDReassign" onchange="HideErrorMessage(this); bindCustomerListByUserType()"></select>
					<span id="spddlNBDUser" class="text-danger field-validation-error" style="display:none;">Hey ! You've missed this field</span>
				</div>

				<ul class="list-unstyled nbd-list check-list mb-0 scroll">

				@*<li class="check-list-item">
					<input type="checkbox" id="selectall" name="type" value="">
					<label for="selectall"><strong>Select All</strong></label>
				</li>
				<li class="check-list-item">
					<input type="checkbox" id="bulkassignone" class="checkselect" name="type" value="">
					<label for="bulkassignone"><strong>Acme Solutions</strong> <span class="d-block sub-text">CUST-0214</span></label>
				</li>*@

				</ul>
				<!-- End -->

				<div class="side-footer">
					@*<button type="button" class="btn btn-lg actionbtn" id="saveBtn" data-dismiss="modal" data-toggle="modal" data-target="#nbdreassign" onclick="RessignNBDUserList()"> Reassign</button>*@
					<button id="btnSave" type="button" class="btn  btn-lg  actionbtn" onclick="RessignUserList('NBD')"> Reassign</button>

				</div>

			</div>
		</div>
	</div>
</div>

<!--  Reassign for NBD -->
<div class="modal fade drawer right-align" id="nbdreassign" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header side-header justify-content-between d-flex">
				<h2 class="modal-title"><img src="../assets/images/icons/help/svg/back-white-arrow.svg" data-dismiss="modal" data-toggle="modal" data-target="#nbd" alt="" class="cursor-pointer"> Reassign </h2>
				<img src="../assets/images/icons/help/close-white-icon.png" class="cursor-pointer align-self-center close" data-dismiss="modal" onclick="ClearBulkFormNBDCRRUser()" />
			</div>
			<div class="modal-body mb-100">
				<!-- open -->
				@*<p id="fromNBDText"><strong>From : Aarav Sharma</strong> (BOINTL105)</p>*@
				<p id="fromNBDText"><strong></strong> </p>

				<div class="searchbar mb-10">
					<input type="search" class="form-control" id="searchInput" placeholder="Search..." oninput="filterUserList('NBD')">
					<label for="searchInput" class="search-label"> <img src="../assets/images/icons/help/search-icon.png" alt="Search Icon""> </label>
				</div>
				<div class="no-results">No matching results found.</div>
				<ul class="list-unstyled check-list mb-0 scroll" id="radioListNBD">

					@*<li class="check-list-item">
				<input type="radio" id="assignone" class="radio radioselect" name="assign">
				<label for="assignone"> Aditya Singh1 (BOINTL200)</label>
				</li>
				<li class="check-list-item">
					<input type="radio" id="assigntwo" class="radio radioselect" name="assign">
					<label for="assigntwo"> Aditya Singh (BOINTL200)</label>
				</li>*@

				</ul>

				<div class="side-footer">
					<button type="button" class="btn btn-lg actionbtn" id="radiosavebtn" onclick="SaveReassignedCustomers('NBD')">Assign</button>
				</div>

			</div>
		</div>
	</div>
</div>

<!--  Bulk Assign for crr -->
<div class="modal fade drawer right-align" id="crr" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header side-header justify-content-between d-flex">
				<h2 class="modal-title"><img src="../assets/images/icons/help/svg/back-white-arrow.svg" data-dismiss="modal" alt="" class="cursor-pointer"> Bulk Assign for CRR</h2>
				<img src="../assets/images/icons/help/close-white-icon.png" class="cursor-pointer align-self-center close" data-dismiss="modal" onclick="ClearBulkFormNBDCRRUser()"/>
			</div>
			<div class="modal-body mb-100">
				<!-- open -->
				<div class=" mb-10 form-group">
					<label>Current Assigned CRR</label>
					<select id="ddlCRRUser" class="form-control applyselect" onchange="HideErrorMessage(this); onCRRChange(); bindCustomerListByUserType()"></select>
					<span id="spddlCRRUser" class="text-danger field-validation-error" style="display:none;">Hey ! You've missed this field</span>
				</div>

				<div class=" mb-10 form-group">
					<label>Current Assigned NBD</label>
					<select id="ddlNBDUserList" class="form-control applyselect" onchange="HideErrorMessage(this); onNBDListChange(); bindCustomerListByUserType()"></select>
					<span id="spddlNBDUserList" class="text-danger field-validation-error" style="display:none;">Hey ! You've missed this field</span>
				</div>

				<ul class="list-unstyled crr-list check-list mb-0 scroll">

				@*<li class="check-list-item">
					<input type="checkbox" id="selectallcrr" name="type" value="">
					<label for="selectallcrr"><strong>Select All</strong> <span class="d-block sub-text">CUST-0214</span></label>
				</li>
				<li class="check-list-item">
					<input type="checkbox" id="crrbulkassignone" class="checkselectcrr" name="type" value="">
					<label for="crrbulkassignone"><strong>Acme Solutions</strong> <span class="d-block sub-text">CUST-0214</span></label>
				</li>*@


				</ul>
				<!-- End -->

				<div class="side-footer">
					@*<button type="button" class="btn btn-lg actionbtn" id="crrsaveBtn" data-dismiss="modal" data-toggle="modal" data-target="#crrreassign" onclick="RessignCRRUserList()"> Reassign</button>*@
					<button id="btnSave" type="button" class="btn  btn-lg  actionbtn" onclick="RessignUserList('CRR')"> Reassign</button>

				</div>

			</div>
		</div>
	</div>
</div>

<!--  Reassign for crr -->
<div class="modal fade drawer right-align" id="crrreassign" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header side-header justify-content-between d-flex">
				<h2 class="modal-title"><img src="../assets/images/icons/help/svg/back-white-arrow.svg" data-dismiss="modal" alt="" data-toggle="modal" data-target="#crr" class="cursor-pointer"> Reassign </h2>
				<img src="../assets/images/icons/help/close-white-icon.png" class="cursor-pointer align-self-center close" data-dismiss="modal" onclick="ClearBulkFormNBDCRRUser()"/>
			</div>
			<div class="modal-body mb-100">
				<!-- open -->

				<p id="fromCRRText"><strong></strong> ()</p>
				<div class="searchbar mb-10">
					<input type="search" class="form-control" id="searchInputcrr" placeholder="Search..." oninput="filterUserList('CRR')">
					<label for="searchInputcrr" class="search-label"> <img src="../assets/images/icons/help/search-icon.png" alt="Search Icon"> </label>
				</div>
				<div class="no-results">No matching results found.</div>
				<ul class="list-unstyled check-list mb-0 scroll" id="radioListCRR">

					@*<li class="check-list-item crrlist">
						<input type="radio" id="crrassignone" class="radio radioselectcrr" name="crrassign">
						<label for="crrassignone"> Aditya Singh (BOINTL200)</label>
					</li>
					<li class="check-list-item crrlist">
						<input type="radio" id="crrassigntwo" class="radio radioselectcrr" name="crrassign">
						<label for="crrassigntwo"> Aditya Singh (BOINTL200)</label>
					</li>*@
					
				</ul>


				<div class="side-footer">
					<button type="button" class="btn btn-lg actionbtn" id="crrradiosavebtn" onclick="SaveReassignedCustomers('CRR')">Assign</button>
				</div>

			</div>
		</div>
	</div>
</div>


@*Ag Grid Scripts Start*@
<link href="~/css/Aggrid/Aggrid1.css" rel="stylesheet" />
<link href="~/css/Aggrid/Aggrid2.css" rel="stylesheet" />
<link href="~/css/aggrid/ag-grid.css" rel="stylesheet" />
<link href="~/css/aggrid/ag-theme-alpine.css" rel="stylesheet" />
<script src="~/CommonJS/AgGrid/dist_aggrid_community.js"></script>
<script src="~/CommonJS/AgGrid/aggridCom.min.js"></script>
<script src="~/CommonJS/AgGrid/autotable.umd.min.js"></script>
<script src="~/assets/js/jquery.dataTables.min.js"></script>
<script src="~/CommonJS/AgGrid/jspdf.umd.min.js"></script>
<script src="~/CommonJS/AgGrid/libs.umd.min.js"></script>
<script src="~/assets/js/jquery.dataTables.min.js"></script>
<script src="~/CommonJS/GenericAgGrid.js"></script>
@*Ag Grid Scripts End*@


<script src="~/Areas/BusinessPartner/DevScript/CreateBusinessPartner.js"></script>
<script src="~/Areas/BusinessPartner/DevScript/CustomerUpload.js"></script>

