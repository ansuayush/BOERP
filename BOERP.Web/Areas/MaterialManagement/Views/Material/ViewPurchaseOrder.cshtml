
@{
    ViewBag.Title = "ViewPurchaseOrder";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var pageType = ViewBag.PageType as string;
    var backUrl = pageType == "VendorPO"
          ? $"/BusinessPartner/PurchaseOrders?auth={ViewBag.Auth}&id={ViewBag.ErpPartyId}&PAId={ViewBag.SuppId}"
        : $"/MaterialManagement/Material/PurchaseOrderIndex?auth={ViewBag.Auth}";
}


<input type="hidden" value="@ViewBag.PoId" id="hdnPoId" />
<input type="hidden" value="@ViewBag.SuppId" id="hdnSuppId" />
<input type="hidden" value="@ViewBag.IndId" id="hdnIndId" />

<div class="pagetitle gap-bottom d-flex justify-content-between">
	<h1 class="m-0 d-flex align-items-center">
		@*<a href="/MaterialManagement/Material/PurchaseOrderIndex?auth=@ViewBag.Auth"><img src="~/assets/images/icons/help/back-icon.png" class="headingicon"></a>Purchase Order <div class="ml-3"></div>*@
		<a href="@backUrl"><img src="~/assets/images/icons/help/back-icon.png" class="headingicon"></a>Purchase Order <div class="ml-3"></div>
	</h1>
    <div class="align-self-center">
        <div class="d-flex justify-content-between align-items-center gap-16">
            <a id="btnEdit" style="display:none;" href="#" onclick="RedirectToEdit()" class="btn mr-2 actionbtn border-r-8"><img src="~/assets/images/icons/help/edit-white-icon.png" class="btn-icon">Edit</a>
            @*<button class="btn mr-2 actionbtn border-r-8">
                <img src="~/assets/images/icons/help/copy-white-icon.png" class="btn-icon m-0">
            </button>*@
            
            <button class="btn actionbtn border-r-8">
                <img src="~/assets/images/icons/help/share-white-icon.png" class="btn-icon  m-0">
            </button>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-12 form-group">
        <div class="card br-none p-0">
            <div class="card-header border-top-RL header-active br-none  d-flex justify-content-between ">
                <h2 class="title-two align-self-center">Status</h2>
                <div class="align-self-center"></div>
            </div>
            <div class="card-body view-form-group status-steps">
                <ul class="d-flex justify-content-between align-items-center">
                    <li class="active"><a href="#">PO Created <span id="spDocDate"></span></a></li>
                    <li><a href="#">Approved</a> </li>
                    <li><a href="#">Sent to Supplier</a></li>
                    <li><a href="#">Material in Transit</a></li>
                    <li><a href="#">Material Received</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-lg-6 form-group">
        <div class="card br-none p-0  col-default-bottom">
            <div class="card-header border-top-RL header-active br-none  d-flex justify-content-between ">
                <h2 class="title-two align-self-center">Supplier’s Information</h2>
                <div class="align-self-center"></div>
            </div>
            <div class="card-body view-form-group">
                <div class="row">
                    <div class="col-sm-6">
                        <label>Supplier Name &amp; Address</label>
                        <p class="m-0" id="lblSuppName"></p><br /><span id="lblSuppAdd"></span>
                    </div>
                    <div class="col-sm-6">
                        <div class="col-sm-12 form-group">
                            <label>Sales Person’s Name</label>
                            <p class="m-0" id="txtSalesName"></p>
                        </div>
                        <div class="col-sm-12">
                            <label>GSTIN</label>
                            <p class="m-0" id="lblSuppGST"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card br-none p-0">
            <div class="card-header border-top-RL header-active br-none  d-flex justify-content-between ">
                <h2 class="title-two align-self-center">Raised By</h2>
                <div class="align-self-center"></div>
            </div>
            <div class="card-body view-form-group">
                <div class="row">
                    <div class="col-md-6 form-group">
                        <label for="" class="readonlay">Name</label>
                        <p id="lblReqName"></p>
                    </div>
                    <div class="col-md-6 form-group">
                        <label for="" class="readonlay">Department</label>
                        <p id="lblReqDept"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-6 form-group">
        <div class="card br-none p-0 h-100">
            <div class="card-header border-top-RL header-active br-none  d-flex justify-content-between ">
                <h2 class="title-two align-self-center">Primary Document Details</h2>
                <div class="align-self-center"></div>
            </div>
            <div class="card-body view-form-group">
                <div class="row">
                    <div class="col-sm-6 form-group">
                        <label>Purchase Order</label>
                        <p class="m-0" id="txtPONumber"></p>
                    </div>
                    <div class="col-sm-6 form-group">
                        <label>Purchase Order Date</label>
                        <p class="m-0" id="txtPODate"></p>
                    </div>

                    <div class="col-sm-6 form-group">
                        <label>Ship To</label>
                        <p class="m-0" id="ddlshipTo"></p>
                    </div>
                    <div class="col-sm-6 form-group">
                        <label>Bill To</label>
                        <p class="m-0" id="ddlBillTo"></p>
                    </div>


                    <div class="col-sm-6 form-group">
                        <label>Indent No</label>
                        <p class="m-0" id="ddlIndent"></p>
                    </div>


                    <div class="col-sm-6 form-group">
                        <label>Payment Terms</label>
                        <p class="m-0" id="ddlPaymentTerm"></p>
                    </div>

                    <div class="col-sm-6 form-group">
                        <label>Term & Condition</label>
                        <p class="m-0" id="ddlTC"></p>
                    </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-12 form-group">
            <div class="card br-none p-0">
                <div class="card-header border-top-RL header-active br-none  d-flex justify-content-between ">
                    <h2 class="title-two align-self-center">Items Information</h2>
                    <div class="align-self-center"></div>
                </div>
                <div class="card-body view-form-group pl-0 pr-0">
                    <div class="table-responsive sticky-responsive ">
                        <table id="tblPO" class="display  dgntable stickyth dataTable no-footer radius-0">
                            <thead>
								<tr>
									<th width="100">Indent No</th>
									<th width="100">Item Code</th>
									<th width="200">Item Name</th>
									<th width="300">Item Description</th>
									<th width="80">HSN</th>
									<th width="100">Delivery Date</th>
									<th width="70">Quantity</th>
									<th width="40">UOM</th>
									<th width="100">Last Purchase <span class="d-block">Rate</span></th>
									<th width="50">Unit <span class="d-block">Price</span></th>
									<th width="100">Amount Before<sapn class="d-block">Discount</sapn></th>
									<th width="50">Dis. %</th>
									<th width="100">Amount After <sapn class="d-block">Discount</sapn></th>
									<th width="55">IGST%</th>
									<th width="100">IGST <span class="d-block">Amount (₹)</span> </th>
									<th width="55">CGST%</th>
									<th width="80">CGST <span class="d-block">Amount (₹)</span> </th>
									<th width="55">SGST%</th>
									<th width="80">SGST <span class="d-block">Amount (₹)</span> </th>
									<th width="100">Total</th>
								</tr>
                            </thead>
                        </table>
                    </div>


            </div>
        </div>
    </div>
    <div class="col-lg-4 form-group">
        <div class="card br-none p-0">
            <div class="card-header border-top-RL header-active br-none  d-flex justify-content-between ">
                <h2 class="title-two align-self-center">Document</h2>
                <div class="align-self-center"></div>
            </div>
            <div class="card-body view-form-group min-175 ">
                <p class="m-0 nofile" id="NoUploadFile1">No Upload</p>
                <div class="section-container fileuploadview section-container-popup hidden" id="ShowUploadFile1">
                    <!--  -->
                    <div id="documentImages" class="document-images">

                    </div>
                    <!--  -->
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-3 form-group">
        <div class="card br-none p-0  ">
            <div class="card-header border-top-RL header-active br-none  d-flex justify-content-between ">
                <h2 class="title-two align-self-center">Notes</h2>
                <div class="align-self-center"></div>
            </div>
            <div class="card-body view-form-group min-175 center-message">
                <div class="empty_data" id="txtComment"></div>
            </div>
        </div>
    </div>
    <div class="col-lg-5 form-group">
        <div class="totalamount">
            <table class="">
                <thead>
                    <tr>
                        <td width="200">Total (before tax) :</td>
                        <td class="text-right" width="100">₹ <span id="totalBeforeTax">0.00</span></td>

                    </tr>
                    <tr>
                        <td><span id="showOtherCharges" data-toggle="tooltip" title="" data-original-title="Add"><img src="~/assets/images/icons/help/add.svg" alt="" data-toggle="modal" data-target="#othercharge" class="icon-xsm cursor-pointer"></span> Other Charges :</td>
                        <td class="text-right">₹ <span id="otherChargesInput">0.00</span> </td>
                    </tr>
                    <tr>
                        <td class="fn-sm">IGST :</td>
                        <td class="text-right fn-sm">₹ <span id="igstTotal">0.00</span></td>
                    </tr>

                    <tr>
                        <td class="fn-sm">CGST :</td>
                        <td class="text-right fn-sm">₹ <span id="cgstTotal">0.00</span></td>

                    </tr>

                    <tr>
                        <td class="fn-sm">SGST :</td>
                        <td class="text-right fn-sm">₹ <span id="sgstTotal">0.00</span></td>

                    </tr>

                    <tr>
                        <td>Total Tax :</td>
                        <td class="text-right">₹ <span id="totalTax">0.00</span></td>

                    </tr>

                    <tr>
                        <td>Total (After Tax) :</td>
                        <td class="text-right">₹ <span id="totalAfterTax">0.00</span></td>

                    </tr>


                    <tr>
                        <td>Rounding Amount :</td>
                        <td class="text-right">₹ <span id="roundingAmountInput">0.00</span> </td>
                    </tr>
                    <tr>
                        <td>Total Amount :</td>
                        <td class="text-right">₹ <span id="grandTotal">0.00</span> </td>

                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

<div class="modal fade" id="othercharge" style="display: none;" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title w-100">Other Charges</h4>
                <button type="button" id="btnPopupClose" class="close" data-dismiss="modal" fdprocessedid="sjwo0k"><img src="/assets/images/icons/help/close-icon.png" class="closeicon"></button>
            </div>

            <div class="modal-body">
                <div class="table-responsive sticky-responsive">
                    <table id="otherchargeTable" class="dgntable dataTable stickyth  no-footer othercharnge">
                        <thead>
                            <tr>

                                <th>Charge Name</th>
                                <th>Charge Amount</th>
                                <th id="headerI">IGST (in %)</th>
                                <th id="headerC">CGST (in %)</th>
                                <th id="headerS">SGST (in %)</th>
                                <th>Total Tax Amount</th>
                                <th>Total Net Amount</th>

                            </tr>
                        </thead>

                    </table>
                </div>

            </div>

            <div class="modal-footer text-center">

                <button type="button" data-dismiss="modal" class="close btn btn-lg cancelbtn" >Cancel</button>
            </div>

        </div>
    </div>
</div>

<script src="~/Areas/MaterialManagement/DevScript/PurchasOrder/ViewPurchaseOrder.js"></script>